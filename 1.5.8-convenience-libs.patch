--- origsrc/waf/wafadmin/Tools/ccroot.py	2009-07-20 11:25:32.800085100 -0500
+++ src/waf/wafadmin/Tools/ccroot.py	2009-07-20 11:20:13.881462100 -0500
@@ -414,8 +414,12 @@ def apply_lib_vars(self):
 		if getattr(y, 'uselib_local', None):
 			lst = y.to_list(y.uselib_local)
 			for u in lst:
+				uf = self.name_to_obj(u)
 				if not u in seen:
-					names.append(u)
+					if 'cshlib' in y.features and 'cstaticlib' in uf.features:
+						pass
+					else:
+						names.append(u)
 
 		# safe to process the current object
 		y.post()
